# 第11章 测试

Go语言的测试依赖一个`go test`测试命令和一组按照约定方式编写的测试函数；

## 11.1 go test

* `_test.go`后缀的源文件在执行`build`时候不会被构建，它们是`go test`测试的一部分
* 在`_test.go`中，以`Test`为函数前缀的为测试函数，`Benchmark`为函数前缀的为基准测试函数，`Example`为函数前缀的是示例函数
* `go test`会遍历所有的`*_test.go`文件中符合上述命名规则的函数，生成一个`临时的mai包`用于调用响应的测试函数，接着构建并运行、报告测试结果，最后清理测试中生成的临时文件
* `go test -v `每个测试函数的名字和运行时间
* `go test -run `对应一个正则表达式，只有被匹配到的测试函数才会被运行，比如`go test -v -run="French|Canal"`

## 11.2 测试函数

* 测试函数必须以`Test`开头。可选的后缀名必须以大写字母开头；`TestName(t *testing.T)`
* 测试函数的签名如下
```
func TestName(t *testing.T) {}
```
示例：`code/word1`, `code/word2`, `exerciese/11.1`

## 11.2.1 随机测试
随机测试如何知道希望的输出结果？
1 编写另一个对照函数，使用简单和清晰的算法，针对相同的随机输入检查两者的输出结果
2 生成的随机输入的数据遵循特定的模式

第二种方式的示例: `code/random_palindrome`

## 11.2.2. 测试一个命令
示例： `code/echo`;
测试代码和产品代码在同一个包，虽然是main包，也对应的`main`入口函数，但是在测试时候`main`包只是`TestEcho`测试函数导入的一个普通包，
里面`main`函数并没有被导出，而是被忽略了

## 11.2.3. 白盒测试
黑盒测试只需要测试包公开的文档和API行为
白盒测试有访问包内部函数和数据结构的权限(之前的`echo`程序，更新了out包级变量)
示例：``
